(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[630],{1487:function(e,t,n){"use strict";var r=n(32),c=n(317),a=n(31),i=n(120),o=n(0),s=n.n(o),u=n(19),d=n(35),l=n(1325),f=n(1152),b=n(1185),m={root:null,rootMargin:"0px",threshold:[.05,.3,.6,.95]},O=function(e,t){var n=Object(o.useRef)(null),r=Object(o.useRef)(null);return Object(o.useEffect)((function(){t&&!r.current&&n.current&&("IntersectionObserver"in window?(r.current=new IntersectionObserver((function(t){var n;(null==t||null===(n=t[0])||void 0===n?void 0:n.isIntersecting)&&(e(),r.current&&(r.current.disconnect(),r.current=null))}),m),r.current.observe(n.current)):e());return function(){r.current&&(r.current.disconnect(),r.current=null)}}),[t,e]),n},j=n(1328),p=n(297),v={1:[600,600],2:[600,100],3:[1200,400],4:[960,240],5:[600,200],6:[600,150],7:[1980,150],8:[1200,150],9:[1980,110]};var g=function(e){var t=v[e],n=t[0],r=t[1];return Number(parseFloat(String(r/n*100)).toFixed(2))},E=Object(u.css)("opacity:1 !important;max-height:100%;"),y=function(e){return Object(u.css)("display:block;position:relative;padding-top:",e,"% !important;&.hidden{padding-top:0 !important;}")},I=Object(u.css)("width:100%;position:absolute;top:0;left:0;bottom:0;right:0;"),h=function(e){var t,n=e.isImpressed,r=e.isDataExist,c=e.dimenId,i=e.onImpression,l=e.onClick,m=e.imageContainerStyle,j=e.imageStyle,v=e.tdnData,E=e.position,h=Object(d.l)(),S=Object(o.useState)(!1),_=Object(a.a)(S,2),N=_[0],C=_[1],D=Object(o.useState)(f.a),w=Object(a.a)(D,2),k=w[0],x=w[1],A=Object(o.useState)(!1),T=Object(a.a)(A,2),L=T[0],R=T[1],B=Object(o.useState)(!1),F=Object(a.a)(B,2),M=F[0],H=F[1],K=Object(o.useState)(!1),P=Object(a.a)(K,2),U=P[0],G=P[1],V=Object(o.useRef)(null),q="function"==typeof l?l:b.a,z="function"==typeof i?i:b.a,J=v||{},Q=J.banner,W=J.ad_click_url,X=J.ad_view_url,Y=E&&(null==Q?void 0:Q.position)!==E,Z=O((function(){Y||(X&&(C(!0),fetch("".concat(X,"&render=false"),{method:"GET",credentials:"include"}).catch((function(e){console.error("Failed to commit TopAds banner impression: ".concat(e))}))),z(v))}),r&&!N);return Object(o.useEffect)((function(){C(!1),H(!1),R(!1)}),[h.search]),Object(o.useEffect)((function(){L||(r?Y&&R(!0):n&&R(!0))}),[r,L,n,Y]),Object(o.useEffect)((function(){if(r&&!M&&!U){var e=(((null==Q?void 0:Q.images)||[]).find((function(e){var t,n=(null==e||null===(t=e.image_dimension)||void 0===t?void 0:t.dimen_id)||0;return f.b[n]?f.b[n].includes(c):n===c}))||{}).full_ecs||"";G(!0);var t=new window.Image;t.src=e,t.onload=function(){x(e),H(!0),G(!1)}}}),[Q,c,U,r,M]),M||L?s.a.createElement("div",{className:Object(u.cx)(y(g(c)),m,{hidden:L})},r&&!Y&&s.a.createElement("a",{href:W,ref:Z,onClick:function(e){return q(e,v)},"data-testid":"tdnLink"},s.a.createElement("img",{ref:V,className:Object(u.cx)(I,j,{loaded:M}),src:k,alt:"Topads Banner"}))):s.a.createElement("div",{className:(t=g(c),Object(u.css)("span{padding-top:",t,"% !important;}"))},s.a.createElement(p.a,{width:"100%"}))},S=["inventoryId","dimenId","className","imageContainerStyle","imageStyle","display","triggerType","ep","onClick","onImpression","onSuccess","onError","position"],_=function(e){var t,n=e.inventoryId,m=e.dimenId,p=e.className,v=e.imageContainerStyle,g=e.imageStyle,y=e.display,I=e.triggerType,_=e.ep,N=e.onClick,C=e.onImpression,D=e.onSuccess,w=e.onError,k=e.position,x=Object(i.a)(e,S),A=Object(o.useContext)(l.a),T=A.onFetch,L=A.getTDNData,R=A.getId,B=A.isFetchingData,F=A.error,M=Object(d.l)(),H=Object(o.useState)(""),K=Object(a.a)(H,2),P=K[0],U=K[1],G=Object(o.useState)(!1),V=Object(a.a)(G,2),q=V[0],z=V[1],J=Object(o.useRef)(!1),Q=Object(o.useRef)(!1),W=Object(o.useRef)(!1),X=f.f.includes(I||"")?I:f.g,Y=X!==f.h||"boolean"!=typeof y||y,Z=_||f.c,$="function"==typeof D?D:b.a,ee="function"==typeof w?w:b.a,te=Object(j.a)({inventoryId:n,dimenId:m}),ne=te.isParamsValid,re=te.validationError,ce=Boolean(L(P)),ae=Object(o.useMemo)((function(){return Y?L(P):{}}),[Y,L,P]),ie="object"===Object(c.a)(ae)&&Object.keys(ae).length>1,oe=Object(o.useCallback)((function(){ne&&T()}),[ne,T]),se=O(oe,!q),ue=Boolean(null===(t=se.current)||void 0===t?void 0:t.getAttribute("data-triggered"));Object(o.useEffect)((function(){q||X!==f.h||!Y||W.current||(W.current=!0,oe()),!Y&&W.current&&(W.current=!1)}),[Y,oe,q,X]),Object(o.useEffect)((function(){q!==ue&&z(ue)}),[ue,q]),Object(o.useEffect)((function(){U(""),se.current&&se.current.removeAttribute("data-triggered")}),[se,M.search]),Object(o.useEffect)((function(){P||U(R())}),[R,P]);var de=q&&!B&&!F.isError&&!J.current&&ce,le=F.isError&&!Q.current;Object(o.useEffect)((function(){de?(J.current=!0,$(ie,ae)):q!==J.current&&(J.current=!1)}),[ie,de,$,ae,q]),Object(o.useEffect)((function(){le?(Q.current=!0,ee(F.errorMessage)):F.isError!==Q.current&&(Q.current=!1)}),[F.errorMessage,F.isError,le,ee]),Object(o.useEffect)((function(){ne||console.error("[TDN] Component Error: ".concat(re))}),[ne,re]);var fe={isImpressed:de||le,isDataExist:ie,tdnData:ae,dimenId:m,onImpression:C,onClick:N,imageContainerStyle:v,imageStyle:g,position:k};return s.a.createElement("div",Object(r.a)({className:Object(u.cx)(E,p),ref:se,"data-id":"".concat(f.e).concat(P),"data-ep":Z,"data-inventory_id":n,"data-dimen_id":m,"data-testid":"tdn-pluggable"},x),s.a.createElement(h,fe))};t.a=Object(o.memo)(_)},4127:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(1487),i=n(2);const o=Object(i.css)("opacity:0;");var s=n(2107);const u=({dataTestId:e,dimenId:t,inventoryId:n,className:i})=>{const u=Object(r.useRef)(null);return c.a.createElement("div",{ref:u,className:o},c.a.createElement(a.a,{inventoryId:n,dimenId:t,ep:s.f,"data-testid":e,onSuccess:e=>{e&&(u.current.className=i||"")}}))};u.defaultProps={className:""};t.default=u}}]);