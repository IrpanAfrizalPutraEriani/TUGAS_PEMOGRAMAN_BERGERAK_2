(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[949],{2633:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LoginMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TokenRequest"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login_token"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"access_token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"acc_sid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sq_check"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cotp_url"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:130}};t.loc.source={body:"mutation LoginMutation($input:TokenRequest!){login_token(input:$input){access_token sid acc_sid errors{message}sq_check cotp_url}}",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function o(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}t.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}})),e.exports=t,e.exports.LoginMutation=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,c=new Set;for(i.forEach((function(e){c.add(e)}));c.size>0;){var l=c;c=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){c.add(e)})))}))}return r.forEach((function(n){var i=o(e,n);i&&t.definitions.push(i)})),t}(t,"LoginMutation")},6667:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return x}));var i=t(15),a=t(26),o=t(14),r=t.n(o),c=t(250),l=t.n(c),s=t(122),u=t.n(s),d=t(99),v=t.n(d),p=t(212),f=t.n(p),k=t(375),m=t.n(k),b=t(211),g=t.n(b),h=t(70),O=t(20),_=t(181),y=t(89),j=t(2633),S=t.n(j),w=t(55),L=t.n(w);var N=t(42),D=t.n(N);var E={event:"clickAccount",eventCategory:"widget login page - yolo",eventAction:"click on button google yolo",businessUnit:"user platform",currentSite:"tokopediamarketplace"};function x(e){var n,t,o=e.apolloClient,c=e.setIsLoading,s=e.tokopediaClientId,d=e.VISITED,p=e.PROVIDER,k=e.FROM_WIDGET,b=e.xdevice,j=e.pathname,w=e.search,N=e.hash,x=e.swExclude,A=e.googleId,I=e.platform,F=void 0===I?"lite":I,C=function(){var e=Object(a.a)(r.a.mark((function e(n){var t,a,l,L,D,A,I,C,M,T,q,U,V,R,z,B,G,W,H,K,P,$;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M=v()(4),T={currentUrl:window.location.href,visited:d,provider:p,fromWidget:k},c(!0),q="",e.prev=4,e.next=7,Object(y.a)();case 7:U=e.sent,V=U.data,q=null==V?void 0:V.fingerprint,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),console.error(e.t0),e.abrupt("return");case 16:return R="lite"===F?"36629":"36615",e.prev=17,e.next=20,o.mutate({mutation:S.a,variables:{input:{grant_type:"".concat(btoa("extension")).concat(M),social_type:O.N,access_token:n,fpt:q,supported:"true",cotp_ld:m()(T)}},context:{headers:Object(i.a)(Object(i.a)({},u()("login")),{},{server:"go","Accounts-Authorization":"".concat(btoa(s)).concat(M),"X-Device":b})}});case 20:C=e.sent,e.next=28;break;case 23:return e.prev=23,e.t1=e.catch(17),c(!1),h.a.pushObject(Object(i.a)(Object(i.a)({},E),{},{eventLabel:"failed - yolo - ".concat(JSON.stringify(e.t1)),trackerId:R})),e.abrupt("return");case 28:if(z=null===(t=C)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.login_token,!(B=null!==(l=null==z||null===(L=z.errors)||void 0===L||null===(D=L[0])||void 0===D?void 0:D.message)&&void 0!==l?l:"")){e.next=34;break}return c(!1),h.a.pushObject(Object(i.a)(Object(i.a)({},E),{},{eventLabel:"failed - yolo - ".concat(B),trackerId:R})),e.abrupt("return");case 34:if(G=null!==(A=null==z?void 0:z.sid)&&void 0!==A?A:""){e.next=39;break}return c(!1),h.a.pushObject(Object(i.a)(Object(i.a)({},E),{},{eventLabel:"failed - yolo - sid empty",trackerId:R})),e.abrupt("return");case 39:if(W=null==z?void 0:z.sq_check,H=null==z?void 0:z.cotp_url,K=null!==(I=null==z?void 0:z.acc_sid)&&void 0!==I?I:"",P=f()(p,{sid:G,sidAccount:K}),!W){e.next=51;break}if(H){e.next=48;break}return c(!1),h.a.pushObject(Object(i.a)(Object(i.a)({},E),{},{eventLabel:"failed - yolo - sq url invalid",trackerId:R})),e.abrupt("return");case 48:return g()(P),window.location.assign(H),e.abrupt("return");case 51:return $={apolloClient:o,fromWidget:k,provider:p,pathname:j,search:w,hash:N,visited:d,outsides:x,onGetUserError:function(e){var n,t=e.error;c(!1),n=t?(null==t?void 0:t.message)||String(t):"Error getting user data",h.a.pushObject(Object(i.a)(Object(i.a)({},E),{},{eventLabel:"failed - yolo - ".concat(n),trackerId:R}))},onSuccess:function(){c(!1),h.a.pushObject(Object(i.a)(Object(i.a)({},E),{},{eventLabel:"success - yolo",trackerId:R})),window.location.reload()}},e.next=54,Object(_.a)($);case 54:case"end":return e.stop()}}),e,null,[[4,12],[17,23]])})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.pushObject(Object(i.a)(Object(i.a)({},E),{},{eventLabel:"click - yolo"})),C(n.credential);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();n=!0,(t=new Date).setMinutes(t.getMinutes()+5),D()(O.T,n,t),l()({src:"https://accounts.google.com/gsi/client",async:!0,defer:!0,callback:function(){var e;null!==(e=google)&&void 0!==e&&e.accounts&&(google.accounts.id.initialize({client_id:A,callback:M,auto_select:!Boolean(L()(O.S))}),google.accounts.id.prompt((function(e){e.isDisplayed()&&h.a.pushObject({event:"viewAccountIris",eventAction:"view login page",eventLabel:"",eventCategory:"widget login page - yolo",trackerId:"lite"===F?"36627":"36613",businessUnit:"user platform",currentSite:"tokopediamarketplace"}),e.isSkippedMoment()&&h.a.pushObject({event:"clickAccount",eventAction:"click on button close",eventCategory:"widget login page - yolo",eventLabel:"",trackerId:"lite"===F?"36628":"36614",businessUnit:"user platform",currentSite:"tokopediamarketplace"})})))}})}}}]);